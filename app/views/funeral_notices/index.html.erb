<h1>Buscar Avisos Fúnebres</h1>

<%= form_with url: funeral_notices_path, method: :get, local: true, class: "search-form" do %>
  <div style="margin-bottom: 1em;">
    <%= label_tag :full_name, "Nombre completo:" %><br>
    <%= text_field_tag :full_name, params[:full_name], placeholder: "Ej: Mario Carrelli", size: 40 %>
  </div>

  <div style="margin-bottom: 1em;">
    <%= label_tag :content, "Contenido del aviso:" %><br>
    <%= text_field_tag :content, params[:content], placeholder: "Ej: Velatorio, 53 Nº 1177", size: 60 %>
  </div>

  <%= submit_tag "🔍 Buscar", class: "search-button" %>
<% end %>


<% if @funeral_notices.any? %>
  <h2>Resultados:</h2>
  <ul>
    <% @funeral_notices.each do |notice| %>
      <li>
        <strong><%= notice.full_name %></strong><br>
        <em><%= notice.published_on.strftime("%d/%m/%Y") %></em><br>
        <p><%= notice.content %></p>
        <small><%= link_to "Fuente", notice.source_link, target: "_blank" %></small>
      </li>
    <% end %>
  </ul>
<% elsif params[:q].present? %>
  <p>No se encontraron resultados para "<strong><%= params[:q] %></strong>".</p>
<% end %>

<% if @funeral_notices.respond_to?(:total_pages) && @funeral_notices.total_pages > 1 %>
  <%= paginate @funeral_notices %>
<% end %>
