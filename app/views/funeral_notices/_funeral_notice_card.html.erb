<% cache notice do %>
  <div class="bg-white rounded-2xl shadow-sm p-6">
    <h2 class="text-xl font-semibold text-[#0f172a]">
      <%= link_to (local_assigns[:highlighted_fields] ? highlighted_fields[:full_name].html_safe : notice.full_name), funeral_notice_path(notice.route_params), class: "hover:text-[#312e81] transition" %>
    </h2>
    <p class="text-sm text-gray-500 mb-2"><%= format_published_date(notice.published_on) %></p>
    <p class="text-gray-700 mb-4"><%= local_assigns[:highlighted_fields] ? highlighted_fields[:content].html_safe : notice.content %></p>
    
    <% if local_assigns[:hide_actions] %>
      <% if notice.source_link.present? %>
        <footer class="mt-6 pt-4 border-t border-gray-200">
          <a href="<%= notice.source_link %>" target="_blank" rel="noopener" class="text-[#312e81] hover:text-[#0f172a] transition text-sm">
            Ver en el diario original
          </a>
        </footer>
      <% end %>
    <% else %>
      <div class="flex gap-4">
        <%= link_to "Ver detalles", funeral_notice_path(notice.route_params), class: "text-sm text-[#312e81] hover:text-[#0f172a]" %>
        <% if notice.source_link.present? %>
          <a href="<%= notice.source_link %>" target="_blank" class="text-sm text-[#312e81] hover:text-[#0f172a]">Ver en el diario</a>
        <% end %>
      </div>
    <% end %>
  </div>
<% end %> 